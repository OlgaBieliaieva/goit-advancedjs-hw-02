{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n\n    if (selectedDates[0] < Date.now()) {\n    return  iziToast.error({        \n        message: \"Please choose a date in the future\",             \n    });\n    } else {\n      refs.setDateBtn.removeAttribute('disabled');\n    }\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nconst refs = {\n  dateInput: document.querySelector('input'),\n  setDateBtn: document.querySelector('button'),\n  timer: {\n    days: document.querySelector('.value[data-days]'),\n    hours: document.querySelector('.value[data-hours]'),\n    minutes: document.querySelector('.value[data-minutes]'),\n    seconds: document.querySelector('.value[data-seconds]'),\n  },\n};\n\nrefs.setDateBtn.setAttribute('disabled', true);\nrefs.setDateBtn.addEventListener('click', onStartBtnClick);\n\nlet intervalId = null;\n\nfunction onStartBtnClick() {\n  const finishTime = new Date(`${refs.dateInput.value}`);\n\n  intervalId = setInterval(() => {\n    const currentTime = Date.now();\n    const timeLeft = finishTime - currentTime;\n\n    if (timeLeft < 1000) {\n      onStopTimer(intervalId);\n    }\n    convertMs(timeLeft);\n  }, 1000);\n}\n\nfunction onStopTimer(intervalId) {\n  clearInterval(intervalId);\n}\n\nfunction createMarkup(days, hours, minutes, seconds) {\n  refs.timer.days.textContent = days;\n  refs.timer.hours.textContent = hours;\n  refs.timer.minutes.textContent = minutes;\n  refs.timer.seconds.textContent = seconds;\n}\n\nfunction addLeadingZero({ ...value }) {\n  const values = Object.values(value);\n  const formattedValues = values.map(value =>\n    String(value).length < 2 ? String(value).padStart(2, '0') : String(value)\n  );\n\n  createMarkup(...formattedValues);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  addLeadingZero({ days, hours, minutes, seconds });\n}"],"names":["options","selectedDates","iziToast","refs","flatpickr","onStartBtnClick","intervalId","finishTime","currentTime","timeLeft","onStopTimer","convertMs","createMarkup","days","hours","minutes","seconds","addLeadingZero","value","formattedValues","ms"],"mappings":"+IAKA,MAAMA,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAGrB,GAFA,QAAQ,IAAIA,EAAc,EAAE,EAExBA,EAAc,GAAK,KAAK,IAAG,EAC/B,OAAQC,EAAS,MAAM,CACnB,QAAS,oCACjB,CAAK,EAECC,EAAK,WAAW,gBAAgB,UAAU,CAE7C,CACH,EAEAC,EAAU,mBAAoBJ,CAAO,EAErC,MAAMG,EAAO,CACX,UAAW,SAAS,cAAc,OAAO,EACzC,WAAY,SAAS,cAAc,QAAQ,EAC3C,MAAO,CACL,KAAM,SAAS,cAAc,mBAAmB,EAChD,MAAO,SAAS,cAAc,oBAAoB,EAClD,QAAS,SAAS,cAAc,sBAAsB,EACtD,QAAS,SAAS,cAAc,sBAAsB,CACvD,CACH,EAEAA,EAAK,WAAW,aAAa,WAAY,EAAI,EAC7CA,EAAK,WAAW,iBAAiB,QAASE,CAAe,EAEzD,IAAIC,EAAa,KAEjB,SAASD,GAAkB,CACzB,MAAME,EAAa,IAAI,KAAK,GAAGJ,EAAK,UAAU,OAAO,EAErDG,EAAa,YAAY,IAAM,CAC7B,MAAME,EAAc,KAAK,MACnBC,EAAWF,EAAaC,EAE1BC,EAAW,KACbC,EAAYJ,CAAU,EAExBK,EAAUF,CAAQ,CACnB,EAAE,GAAI,CACT,CAEA,SAASC,EAAYJ,EAAY,CAC/B,cAAcA,CAAU,CAC1B,CAEA,SAASM,EAAaC,EAAMC,EAAOC,EAASC,EAAS,CACnDb,EAAK,MAAM,KAAK,YAAcU,EAC9BV,EAAK,MAAM,MAAM,YAAcW,EAC/BX,EAAK,MAAM,QAAQ,YAAcY,EACjCZ,EAAK,MAAM,QAAQ,YAAca,CACnC,CAEA,SAASC,EAAe,IAAKC,GAAS,CAEpC,MAAMC,EADS,OAAO,OAAOD,CAAK,EACH,IAAIA,GACjC,OAAOA,CAAK,EAAE,OAAS,EAAI,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAAI,OAAOA,CAAK,CAC5E,EAEEN,EAAa,GAAGO,CAAe,CACjC,CAEA,SAASR,EAAUS,EAAI,CASrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EAEpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElEH,EAAe,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAAA,CAClD"}