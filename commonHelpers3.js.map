{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n};\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  const userStep = Number(event.target.elements['step'].value);\n  const userAmount = Number(event.target.elements['amount'].value);\n  let delay = Number(event.target.elements['delay'].value);\n\n  formHandler(delay, userStep, userAmount);\n}\n\nfunction formHandler(delay, userStep, userAmount) {\n  for (let i = 1; i <= userAmount; i += 1) {\n    createPromise(i, delay)\n      .then(({ position, delay }) => {\n        iziToast.success({\n          message: `Fulfilled promise ${position} in ${delay}ms`,\n        });\n      })\n      .catch(({ position, delay }) => {\n        iziToast.error({\n          message: `Rejected promise ${position} in ${delay}ms`,\n        });\n      });\n    delay += userStep;\n  }\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n}\n"],"names":["refs","onFormSubmit","event","userStep","userAmount","delay","formHandler","i","createPromise","position","iziToast","resolve","reject","shouldResolve"],"mappings":"wIAGA,MAAMA,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,CACtC,EAEAA,EAAK,KAAK,iBAAiB,SAAUC,CAAY,EAEjD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAMC,EAAW,OAAOD,EAAM,OAAO,SAAS,KAAQ,KAAK,EACrDE,EAAa,OAAOF,EAAM,OAAO,SAAS,OAAU,KAAK,EAC/D,IAAIG,EAAQ,OAAOH,EAAM,OAAO,SAAS,MAAS,KAAK,EAEvDI,EAAYD,EAAOF,EAAUC,CAAU,CACzC,CAEA,SAASE,EAAYD,EAAOF,EAAUC,EAAY,CAChD,QAASG,EAAI,EAAGA,GAAKH,EAAYG,GAAK,EACpCC,EAAcD,EAAGF,CAAK,EACnB,KAAK,CAAC,CAAE,SAAAI,EAAU,MAAAJ,KAAY,CAC7BK,EAAS,QAAQ,CACf,QAAS,qBAAqBD,QAAeJ,KACvD,CAAS,CACT,CAAO,EACA,MAAM,CAAC,CAAE,SAAAI,EAAU,MAAAJ,KAAY,CAC9BK,EAAS,MAAM,CACb,QAAS,oBAAoBD,QAAeJ,KACtD,CAAS,CACT,CAAO,EACHA,GAASF,CAEb,CAEA,SAASK,EAAcC,EAAUJ,EAAO,CACtC,OAAO,IAAI,QAAQ,CAACM,EAASC,IAAW,CACtC,MAAMC,EAAgB,KAAK,OAAM,EAAK,GACtC,WAAW,IAAM,CACXA,EACFF,EAAQ,CAAE,SAAAF,EAAU,MAAAJ,CAAK,CAAE,EAE3BO,EAAO,CAAE,SAAAH,EAAU,MAAAJ,CAAK,CAAE,CAE7B,EAAEA,CAAK,CACZ,CAAG,CACH"}